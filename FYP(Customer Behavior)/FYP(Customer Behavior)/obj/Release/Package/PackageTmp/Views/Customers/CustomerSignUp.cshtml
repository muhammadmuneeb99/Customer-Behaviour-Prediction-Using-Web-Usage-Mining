@model FYP_Customer_Behavior_.Models.Dtos.customerSignUpDto

@{
    ViewBag.Title = "CustomerSignUp";
    Layout = "~/Views/Shared/CustomerLayout.cshtml";
}
<main>
    <div class="container">
        <div class="customerSignUpMainDiv center-block">
            <h5 class="center">Create Your emart Account.</h5>
            <div class=" hoverable white z-depth-5">
                <div class="row ">
                    @if (Model != null)
                    {
                        <form class="col l12 m12 s12" id="signUpForm">
                            <div class="row">
                                <div class="input-field col l6 m12 s12">
                                    <i class="material-icons prefix">account_circle</i>
                                    <input id="icon_prefixN" type="text" value="@Model.custName" name="custName" class="validate" required>
                                    <label for="icon_prefixN">Name</label>
                                </div>
                                <div class="input-field col l6 m12 s12">
                                    <i class="material-icons prefix">contact_mail</i>
                                    <input id="icon_prefixE" type="email" name="email" value="@Model.email" class="validate" title="The domain portion of the email address is invalid (the portion after the " @@")." pattern="^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*(\.\w{2,})+$" required>
                                    <label for="icon_prefixE">Email</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col l6 m12 s12">
                                    <i class="material-icons prefix">security</i>
                                    <input id="icon_prefix" name="password" minlength="8" type="password" class="validate" pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$" title="Please include at least 1 uppercase character, 1 lowercase character, and 1 number." required>
                                    <label for="icon_prefix">Password</label>
                                </div>
                                <div class="input-field col l6 m12 s12">
                                    <i class="material-icons prefix">phone</i>
                                    <input id="icon_telephone1" name="ph1" minlength="11" value="@Model.ph1" maxlength="11" type="tel" class="validate" placeholder="032xxxxxxxx" pattern="[0]{1}[3]{1}[0-9]{2}[0-9]{7}" title="Please Enter valid Phone Number" required>
                                    <label for="icon_telephone1">Phone No</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class=" col l6 m12 s12">
                                    <select id="comboboxgender" name="gender" class="gender"></select>
                                </div>
                                <div class=" col l6 m12 s12">
                                    <button style="background-color: #292929;" type='submit' name='btn_login' class='col s12 btn btn-large waves-effect signUp' id="signUp">
                                        Sign Up
                                    </button>
                                </div>
                            </div>
                        </form>
                    }
                    else
                    {
                        <form class="col l12 m12 s12" id="signUpForm">
                            <div class="row">
                                <div class="input-field col l6 m12 s12">
                                    <i class="material-icons prefix">account_circle</i>
                                    <input id="icon_prefixN" type="text" value="" name="custName" class="validate" required>
                                    <label for="icon_prefixN">Name</label>
                                </div>
                                <div class="input-field col l6 m12 s12">
                                    <i class="material-icons prefix">contact_mail</i>
                                    <input id="icon_prefixE" type="email" name="email" value="" class="validate" title="The domain portion of the email address is invalid (the portion after the " @@")." pattern="^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*(\.\w{2,})+$">
                                    <label for="icon_prefixE">Email</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col l6 m12 s12">
                                    <i class="material-icons prefix">security</i>
                                    <input id="icon_prefix" name="password" minlength="8" type="password" class="validate" pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$" title="Please include at least 1 uppercase character, 1 lowercase character, and 1 number." required>
                                    <label for="icon_prefix">Password</label>
                                </div>
                                <div class="input-field col l6 m12 s12">
                                    <i class="material-icons prefix">phone</i>
                                    <input id="icon_telephone1" name="ph1" minlength="11" value="" maxlength="11" type="tel" class="validate" placeholder="032xxxxxxxx" pattern="[0]{1}[3]{1}[0-9]{2}[0-9]{7}" title="Please Enter valid Phone Number" required>
                                    <label for="icon_telephone1">Phone No</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class=" col l6 m12 s12">
                                    <select id="comboboxgender" name="gender" class="gender"></select>
                                </div>
                                <div class=" col l6 m12 s12">
                                    <button style="background-color: #292929;" type='submit' name='btn_login' class='col s12 btn btn-large waves-effect signUp' id="signUp">
                                        Sign Up
                                    </button>
                                </div>
                            </div>
                        </form>
                    }
                </div>
            </div>
        </div>
    </div>
</main>

<script type="text/javascript">

    $(document).ready(function () {
                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("loadgender", "Customers")',
                    success: function (result)
                    {
                        var s = '<option Value="-1">Select Gender</option>';
                        for (var i = 0; i < result.length; i++) {
                            s += '<option value="' + result[i].AID + '">' +
                                result[i].aName+'</option>'
                        }
                        $('#comboboxgender').html(s);
                        $('select').formSelect();
                    }
        });


        $('#signUp').click(function () {

            var data = $('#signUpForm').serialize();

            $.ajax({
                type: 'POST',
                data: data,
                url: "",
                success: function (result) {
                    if (result === "Sorry the email you entered already exist") {
                        toastr.error(result);
                    }
                    else if (result === "Something went wrong try again") {
                        toastr.error(result);
                    }
                    else if (result === "Invalid Email!") {
                        toastr.error(result);
                    }
                    else if (result === "Your Password is empty or doesn't fulfill our requirements!") {
                        toastr.error(result);
                    }
                    else if (result === "Please Select gender!") {
                        toastr.error(result);
                    }
                    else if (result === "Invalid Phone Number!") {
                        toastr.error(result);
                    }
                    else {
                        window.location = "/Customers/" + result;
                    }
                }
            })

        });
    });



</script>
@*@if (ViewBag.errorEmail != null)
{
    <script>
        toastr.error('@ViewBag.errorEmail');
    </script>
}*@

